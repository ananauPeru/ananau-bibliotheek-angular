<ng-container *ngIf="!loading; else loadingError">
  <div class="row">
    <app-sidemenu class="col-12 col-md-2"></app-sidemenu>
    <div class="col-10">
      <div class="alert alert-success marginTop10" role="alert" [hidden]="successMessage == null">
        {{successMessage}}
      </div>
      <div class="alert alert-danger marginTop10" role="alert" [hidden]="errorMessage == null">
        {{errorMessage}}
      </div>
      <div class="card marginTop10">
        <div class="card-header">
          <i class="fa fa-fw fa-globe"></i> <strong>Beheer Items</strong>
          <a class="float-right btn btn-dark btn-sm" [routerLink]="['/itemtoevoegen']" id="itemtoevoegen">
            <i class="fa fa-fw fa-plus-circle"></i> Item toevoegen</a>
        </div>
        <div class="card-body">
          <div class="col-12">
            <h5 class="card-title"><i class="fa fa-fw fa-search"></i> Vind item</h5>
            <form [formGroup]="filterFormulier" (change)="filteren()">
              <div class="row align-bottom">
                <div class="col-3">
                  <div class="form-group">
                    <label>Item naam:</label>
                    <input type="text" name="itemNaam" id="itemNaam" formControlName="itemNaam" class="form-control"
                      value="" placeholder="Geef item naam in">
                  </div>
                </div>
                <div class="col-3">
                  <div class="form-group">
                    <label>Beschikbaar:</label>
                    <select class="form-control" name="beschikbaar" formControlName="beschikbaar" id="beschikbaar">
                      <option value="beiden" selected>Beiden</option>
                      <option value="ja">Ja</option>
                      <option value="nee">Neen</option>
                    </select>
                  </div>
                </div>
                <div class="col-2">
                  <div class="form-group">
                    <label>Gearchiveerd:</label>
                    <input type="checkbox" name="gearchiveerd" id="gearchiveerd" [checked]="gearchiveerd"
                      (change)="gearchiveerd = !gearchiveerd" class="form-control">
                  </div>
                </div>
                <div class="col-2">
                  <div class="form-group">
                    <label>Aantal items:</label>
                    <select class="form-control" name="aantalItems" id="aantalItems"
                      (change)="aantalItemsVeranderen($event.target.value)">
                      <option value="25" selected>25</option>
                      <option value="50">50</option>
                      <option value="75">75</option>
                      <option value="100">100</option>
                    </select>
                  </div>
                </div>
                <div class="col-2">
                  <!--<button type="submit" name="submit" value="search" id="submit" class="btn btn-primary"><i
                      class="fa fa-fw fa-search"></i> Search</button>-->
                  <button (click)="clearForm()" class="btn btn-danger marginLeft5">
                    <i class="fa fa-fw fa-sync"></i>
                    Clear
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
      <table class="table table-striped table-hover marginTop10">
        <thead>
          <tr>
            <th>#</th>
            <th class="hoverUnderline">
              <a (click)="sorteren('naam')">Naam
                <i *ngIf="naamSorteren == null" class="fas fa-sort"></i>
                <i *ngIf="naamSorteren != null && naamSorteren == 'asc'" class="fas fa-sort-down"></i>
                <i *ngIf="naamSorteren != null && naamSorteren == 'desc'" class="fas fa-sort-up"></i>
              </a>
            </th>
            <th class="hoverUnderline">
              <a (click)="sorteren('toegevoegdOp')">Toegevoegd op:
                <i *ngIf="toegevoegdOpSorteren == null" class="fas fa-sort"></i>
                <i *ngIf="toegevoegdOpSorteren != null && toegevoegdOpSorteren == 'asc'" class="fas fa-sort-down"></i>
                <i *ngIf="toegevoegdOpSorteren != null && toegevoegdOpSorteren == 'desc'" class="fas fa-sort-up"></i>
              </a>
            </th>
            <th class="hoverUnderline">
              <a (click)="sorteren('beschikbaar')">Beschikbaar?
                <i *ngIf="beschikbaarSorteren == null" class="fas fa-sort"></i>
                <i *ngIf="beschikbaarSorteren != null && beschikbaarSorteren == 'asc'" class="fas fa-sort-down"></i>
                <i *ngIf="beschikbaarSorteren != null && beschikbaarSorteren == 'desc'" class="fas fa-sort-up"></i>
              </a>
            </th>
            <th>Actions</th>
          </tr>
        </thead>
        <ng-container *ngIf="!loadingItems; else loadingItemsError">
          <tbody>
            <tr *ngFor="let item of items; let index = index">
              <td (click)="redirectTo(item)">
                {{(index + 1) + itemsVanaf}}
              </td>
              <td (click)="redirectTo(item)">{{item.naam}}</td>
              <td (click)="redirectTo(item)">{{item.toegevoegdOp | date: "hh:mm - dd/MM/yyyy" }}</td>
              <td (click)="redirectTo(item)">{{item.beschikbaar ? 'Ja!' : 'Nee'}}</td>
              <td *ngIf="!item.gearchiveerd">
                <a [routerLink]="['..', 'itemwijzigen', item.id]"><i class="fas fa-edit"></i> Edit</a> | <a (click)="archiveringAanpassen(item)"><i
                    class="fas fa-archive"></i>
                  Archiveer</a>
              </td>
              <td *ngIf="item.gearchiveerd">
                <a (click)="verwijderItem(item)"><i class="fas fa-trash"></i> Delete</a> | <a
                  (click)="archiveringAanpassen(item)"><i class="fas fa-archive"></i>
                  Zet terug!</a>
              </td>
            </tr>
          </tbody>
        </ng-container>
      </table>
      <div class="col-12 text-center">
        <div>Showing <b>{{aantalItems <= totaalAantalItemsBeschikaar? aantalItems : tot}}</b> out of
          <b>{{totaalAantalItemsBeschikaar}}</b> entries
        </div>
        <ul class="pagination ">
          <li class="page-item" [ngClass]="{'disabled': itemsVanaf <= 0}"><button (click)="veranderItemsScope(-1)"
              class="page-link">Vorige</button></li>
          <li class="page-item active"><a href="#" class="page-link">1</a></li>
          <li class="page-item"><a href="#" class="page-link">2</a></li>
          <li class="page-item"><a href="#" class="page-link">3</a></li>
          <li class="page-item"><a href="#" class="page-link">4</a></li>
          <li class="page-item"><a href="#" class="page-link">5</a></li>
          <li class="page-item" [ngClass]="{'disabled': totaalAantalItemsBeschikaar <= (itemsVanaf + aantalItems)}">
            <button (click)="veranderItemsScope(1)" class="page-link">
              Volgende
            </button>
          </li>
        </ul>
      </div>
    </div>
  </div>
</ng-container>

<ng-template #loadingError>
  <div class="row">
    <div class="col-12 text-center">
      <div class="spinner-border spinner" role="status">
        <span class="sr-only">Loading...</span>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #loadingItemsError>
  <tr>
    <td colspan="6" class="text-center">
      <div class="spinner-border spinner" role="status">
        <span class="sr-only">Loading...</span>
      </div>
    </td>
  </tr>
</ng-template>
