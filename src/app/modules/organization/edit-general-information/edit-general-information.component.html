<!-- The entire card -->
<div class="card card-custom">
  <!-- The card header -->
  <div class="row">
    <div class="col-12">
      <div
        class="card-header border-0 text-white"
        style="background-color: white; padding: 2rem 2.25rem"
      >
        <div class="row">
          <div class="col-12 col-md-8 w-100">
            <h3 class="card-title font-weight-bolder text-dark">
              General Information
            </h3>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- The card body -->
  <div class="card-body pt=2">
    <!-- visa information -->
    <div class="my-2">
      <h4 class="text-dark font-weight-bold mb-4">Visa</h4>

      <form [formGroup]="visaInformationForm" (ngSubmit)="saveVisaInformation()">
        <div class="form-group row">
          <!-- Input label -->
          <label for="visa" class="col-12">
            Enter visa information
          </label>
          <!-- Input textarea -->
          <div class="col-12">
            <textarea
              class="form-control form-control-solid"
              id="visa"
              formControlName="visaInformation"
              rows="5"
              required
              (input)="adjustTextareaHeight($event)"
              [value]="visaInformation$"
            >
            </textarea>
            <div
              *ngIf="
                visaInformationForm.get('visaInformation')['errors'] &&
                visaInformationForm.get('visaInformation').touched
              "
              class="text-danger form-text"
            >
              {{
                getErrorMessage(visaInformationForm.get('visaInformation')['errors'])
              }}
            </div>
            <!-- Input textarea -->
          </div>
        </div>
        <!-- Save button -->
        <div class="form-group row">
          <div class="col-12">
            <button type="submit" class="btn btn-primary btn-lg" [disabled]="!visaInformationForm.valid">
              Save
            </button>
          </div>
        </div>
      </form>

      <!-- Seperator -->
      <div class="separator separator-dashed my-10"></div>
      <!-- Seperator -->

      <div class="my-2">
        <h4 class="text-dark font-weight-bold mb-4">Vaccinations</h4>

        <div class="row">
          <div class="col-md-6 mb-8">
            <!-- Add new vaccination form -->
            <h5 class="text-dark font-weight-bold mb-4">Add Vaccination</h5>
            <form [formGroup]="vaccinationForm" (ngSubmit)="addVaccination()">
              <div class="form-group">
                <label for="vaccinationName">Vaccination Name</label>
                <input
                  type="text"
                  class="form-control form-control-lg form-control-solid"
                  id="vaccinationName"
                  formControlName="name"
                  required
                />
              </div>
              <div class="form-group">
                <div
                  class="form-check d-flex align-items-center"
                  style="padding-left: 0 !important"
                >
                  <input
                    type="checkbox"
                    class="custom-checkbox mr-3"
                    id="vaccinationRequired"
                    formControlName="required"
                  />
                  <label class="form-check-label mb-0" for="vaccinationRequired"
                    >Is vaccine required</label
                  >
                </div>
              </div>
              <button
                type="submit"
                class="btn btn-primary btn-lg"
                [disabled]="!vaccinationForm.valid"
              >
                Add Vaccine
              </button>
            </form>
          </div>
          <div class="col-md-6">
            <!-- List of vaccinations -->
            <h5 class="text-dark font-weight-bold mb-14">Vaccinations</h5>
            <ul class="list-group">

              <ng-container *ngIf="vaccinations$ | async as vaccinations; else noResults">
                <li class="list-group-item" *ngFor="let vaccination of vaccinations">
                  <div class="d-flex justify-content-between align-items-center">
                    <span>{{ vaccination.name }} - {{ vaccination.required ? "Required" : "Optional" }}</span>
                    <button class="btn btn-sm btn-icon btn-danger" (click)="removeVaccination(vaccination)">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>
                </li>
              </ng-container>
              
              <ng-template #noResults>
                <li class="list-group-item">
                  No vaccinations added yet.
                </li>
              </ng-template>

            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
